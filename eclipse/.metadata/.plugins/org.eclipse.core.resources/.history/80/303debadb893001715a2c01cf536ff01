package thewizardmod.World;

import net.minecraft.block.BlockTorch;
import net.minecraft.block.state.IBlockState;
import net.minecraft.init.Blocks;
import net.minecraft.item.ItemStack;
import net.minecraft.tileentity.TileEntity;
import net.minecraft.tileentity.TileEntityChest;
import net.minecraft.util.EnumFacing;
import net.minecraft.util.math.BlockPos;
import net.minecraft.world.World;
import thewizardmod.Wands.StartupCommon;

public class StructureDungeon {

	public static void generate(World world, int x, int y, int z)
	{
		generateLibrary(world, x, y, z);
		
	}
	
	public static void generateLibrary(World world, int x, int y, int z)
	{
		int height = 4;
		int width = 16;
		int lenght = 16;
		
		IBlockState floor = Blocks.COBBLESTONE.getDefaultState();
		IBlockState wall = Blocks.COBBLESTONE.getDefaultState();
		IBlockState bookshelf = Blocks.BOOKSHELF.getDefaultState();
		
		clearSpace(world, x, y, z, height + 1, width, lenght);
		
		// floor
		for(int i = 0; i < width; i++)
		{
			for(int j = 0; j < lenght; j++)
			{
				BlockPos blockpos = new BlockPos(x + i, y, z + j);
				world.setBlockState(blockpos, floor, 2);
			}
		}
		
		// walls
		for(int i = 1; i < height + 1; i++)
		{
			for(int j = 0; j < width; j++)
			{
				BlockPos blockpos = new BlockPos(x + j, y + i, z);
				world.setBlockState(blockpos, wall, 2);
				blockpos = new BlockPos(x + j, y + i, z + lenght - 1);
				world.setBlockState(blockpos, wall, 2);
			}
			for(int j = 0; j < lenght; j++)
			{
				BlockPos blockpos = new BlockPos(x, y + i, z + j);
				world.setBlockState(blockpos, wall, 2);
				blockpos = new BlockPos(x + width - 1, y + i, z + j);
				world.setBlockState(blockpos, wall, 2);
			}
		}
		
		// Bookshelf on walls
		for(int i = 1; i < height; i++)
		{
			for(int j = 2; j < width - 2; j++)
			{
				BlockPos blockpos = new BlockPos(x + j, y + i, z + 1);
				world.setBlockState(blockpos, bookshelf, 2);
				blockpos = new BlockPos(x + j, y + i, z + lenght - 2);
				world.setBlockState(blockpos, bookshelf, 2);
			}
			
			for(int j = 2; j < lenght - 2; j++)
			{
				BlockPos blockpos = new BlockPos(x + 1, y + i, z + j);
				world.setBlockState(blockpos, bookshelf, 2);
				blockpos = new BlockPos(x + width - 2, y + i, z + j);
				world.setBlockState(blockpos, bookshelf, 2);
			}
			
		}

		// Bookshelf on inside
		for(int i = 1; i < height; i++)
		{
			for(int j = 5; j < width - 5; j++)
			{
				BlockPos blockpos = new BlockPos(x + j, y + i, z + 5);
				world.setBlockState(blockpos, bookshelf, 2);
				blockpos = new BlockPos(x + j, y + i, z + lenght - 6);
				world.setBlockState(blockpos, bookshelf, 2);
			}
			
			for(int j = 5; j < lenght - 5; j++)
			{
				BlockPos blockpos = new BlockPos(x + 5, y + i, z + j);
				world.setBlockState(blockpos, bookshelf, 2);
				blockpos = new BlockPos(x + width - 5, y + i, z + j);
				world.setBlockState(blockpos, bookshelf, 2);
			}
			
		}

		// Door 
		BlockPos blockpos = new BlockPos(x + 7, y + 1, z);
		world.setBlockState(blockpos, Blocks.AIR.getDefaultState(), 2);
		blockpos = new BlockPos(x + 8, y + 1, z);
		world.setBlockState(blockpos, Blocks.AIR.getDefaultState(), 2);
		blockpos = new BlockPos(x + 7, y + 2, z);
		world.setBlockState(blockpos, Blocks.AIR.getDefaultState(), 2);
		blockpos = new BlockPos(x + 8, y + 2, z);
		world.setBlockState(blockpos, Blocks.AIR.getDefaultState(), 2);
		
		// path through bookshelf
		blockpos = new BlockPos(x + 7, y + 1, z + 1);
		world.setBlockState(blockpos, Blocks.AIR.getDefaultState(), 2);
		blockpos = new BlockPos(x + 8, y + 1, z + 1);
		world.setBlockState(blockpos, Blocks.AIR.getDefaultState(), 2);
		blockpos = new BlockPos(x + 7, y + 2, z + 1);
		world.setBlockState(blockpos, Blocks.AIR.getDefaultState(), 2);
		blockpos = new BlockPos(x + 8, y + 2, z + 1);
		world.setBlockState(blockpos, Blocks.AIR.getDefaultState(), 2);
		
		//Door to inner circle
		blockpos = new BlockPos(x + 8, y + 1, z + 10);
		world.setBlockState(blockpos, Blocks.AIR.getDefaultState(), 2);
		blockpos = new BlockPos(x + 8, y + 2, z + 10);
		world.setBlockState(blockpos, Blocks.AIR.getDefaultState(), 2);

		setPillar(world, x + 3, y, z + 3, height);
		setPillar(world, x + 12, y, z + 3, height);
		setPillar(world, x + 3, y, z + 12, height);
		setPillar(world, x + 12, y, z + 12, height);
		
		// The chest
		blockpos = new BlockPos(x + 8, y + 1, z + 6);

        IBlockState iblockstate = Blocks.CHEST.getDefaultState();
        world.setBlockState(blockpos, Blocks.CHEST.correctFacing(world, blockpos, iblockstate), 2);
        TileEntity tileentity = world.getTileEntity(blockpos);

        if (tileentity instanceof TileEntityChest)
        {
            ((TileEntityChest)tileentity).setInventorySlotContents(0, new ItemStack(StartupCommon.goldenWand));
        }

		// The Zombie Spawner under the chest
        SetSpawner.set(world, x + 8, y, z + 6, "thewizardmod.WeirdZombie");
        
		// roof
		for(int i = 1; i < width - 1; i++)
		{
			for(int j = 1; j < lenght - 1; j++)
			{
				blockpos = new BlockPos(x + i, y + height, z + j);
				world.setBlockState(blockpos, floor, 2);
			}
		}

	}
	
	public static void setPillar(World world, int x, int y, int z, int height)
	{
		// pillars with torches
		for(int i = 1; i < height; i++)
		{
			BlockPos blockpos = new BlockPos(x, y + i, z);
			world.setBlockState(blockpos, Blocks.COBBLESTONE.getDefaultState(), 2);
		}		
		BlockPos blockpos = new BlockPos(x - 1, y + 3, z);
		world.setBlockState(blockpos, Blocks.TORCH.getDefaultState().withProperty(BlockTorch.FACING, EnumFacing.WEST), 2);
		blockpos = new BlockPos(x + 1, y + 3, z);
		world.setBlockState(blockpos, Blocks.TORCH.getDefaultState().withProperty(BlockTorch.FACING, EnumFacing.EAST), 2);
		blockpos = new BlockPos(x, y + 3, z - 1);
		world.setBlockState(blockpos, Blocks.TORCH.getDefaultState().withProperty(BlockTorch.FACING, EnumFacing.NORTH), 2);
		blockpos = new BlockPos(x, y + 3, z + 1);
		world.setBlockState(blockpos, Blocks.TORCH.getDefaultState().withProperty(BlockTorch.FACING, EnumFacing.SOUTH), 2);
	}
	
	public static void clearSpace(World world, int x, int y, int z, int height, int width, int lenght)
	{
		for(int i = 0; i < height; i++)
		{
			for(int j = 0; j < width; j++)
			{
				for(int k = 0; k < lenght; k++)
				{
					BlockPos blockpos = new BlockPos(x + j, y + i, z + k);
					world.setBlockState(blockpos, Blocks.AIR.getDefaultState(), 2);
				}
			}
		}
	}
}
