package thewizardmod.altar;

import net.minecraft.block.state.IBlockState;
import net.minecraft.client.Minecraft;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.tileentity.TileEntity;
import net.minecraft.util.math.BlockPos;
import net.minecraft.world.World;
import thewizardmod.runeSlab.StartupCommon;
import thewizardmod.runeSlab.TileEntityRuneSlab;

public class Altar {

	public static int runeTypes[] = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
	
	public static int checkForRunes(World world, BlockPos pos, IBlockState state, EntityPlayer player)
	{
		int runeCount = 0;
		double x = pos.getX();
		double y = pos.getY();
		double z = pos.getZ();
		
		// Runes can be 4 blocks around the altar
		double startX = x - 4;
		double endX   = x + 4;
		double startZ = z - 4;
		double endZ   = z + 4;
		
		
		for(double i = startX; i <= endX; i++)
		{
			for(double j = startZ; j <= endZ;j++)
			{
				if(world.getBlockState(new BlockPos(i, y, j)).getBlock() == StartupCommon.runeSlab)
				{
					runeCount += 1;
					 TileEntity tileEntity = world.getTileEntity(pos);
					  if(tileEntity instanceof TileEntityRuneSlab)
					  {
						  for(int r = 0; r < 25; r++)
						  {
							  TileEntityRuneSlab runeSlab = (TileEntityRuneSlab) tileEntity;
							  if(runeSlab.getRuneType() == r)
							  {
								  runeTypes[r] += 1;
							  }
						  }
					  }
				}
			}
		}
		for (int r = 0; r < 25; r++)
			System.out.println(r + " -> " + runeTypes[r]);
		return runeCount;
	}
	
	public static int checkForTorches(World world, BlockPos pos, IBlockState state, EntityPlayer player)
	{
		int torchCount = 0;
		
		// During night time, when the torches are burning, power is bigger ;-) 
  		long time = Minecraft.getMinecraft().theWorld.getWorldTime();
  		if(time < 23500 && time >12800)
  		{
			
			double x = pos.getX();
			double y = pos.getY();
			double z = pos.getZ();
		
			// Torches can be 6 blocks around the altar
			double startX = x - 6;
			double endX   = x + 6;
			double startZ = z - 6;
			double endZ   = z + 6;
		
		
			for(double i = startX; i <= endX; i++)
			{
				for(double j = startZ; j <= endZ;j++)
				{
					if(world.getBlockState(new BlockPos(i, y, j)).getBlock() == thewizardmod.torch.StartupCommon.torch)
					{
						torchCount += 1;
					}
				}
			}
  		}				
		return torchCount;
	}
	
	public static boolean checkForPedestrals(World world, BlockPos pos, IBlockState state, EntityPlayer player)
	{
		int pedestralCount = 0;
		double x = pos.getX();
		double y = pos.getY();
		double z = pos.getZ();
		
		if(world.getBlockState(new BlockPos(x - 3, y, z)).getBlock() == thewizardmod.pedestral.StartupCommon.pedestral)
		{
			pedestralCount += 1;
		}
		
		if(world.getBlockState(new BlockPos(x + 3, y, z)).getBlock() == thewizardmod.pedestral.StartupCommon.pedestral)
		{
			pedestralCount += 1;
		}
		
		if(world.getBlockState(new BlockPos(x, y, z - 3)).getBlock() == thewizardmod.pedestral.StartupCommon.pedestral)
		{
			pedestralCount += 1;
		}
		
		if(world.getBlockState(new BlockPos(x, y, z + 3)).getBlock() == thewizardmod.pedestral.StartupCommon.pedestral)
		{
			pedestralCount += 1;
		}
		if(pedestralCount == 4)
		{
			return true;
		}
		return false;
		
	}
}
